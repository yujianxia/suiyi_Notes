(window.webpackJsonp=window.webpackJsonp||[]).push([[439],{800:function(s,a,t){"use strict";t.r(a);var e=t(25),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"谨慎使用-outfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#谨慎使用-outfile"}},[s._v("#")]),s._v(" 谨慎使用 "),t("code",[s._v("--outFile")])]),s._v(" "),t("p",[s._v("由于以下几点原因，你应该谨慎使用 "),t("code",[s._v("--outFile")]),s._v(" 选项：")]),s._v(" "),t("ul",[t("li",[s._v("运行时的错误；")]),s._v(" "),t("li",[s._v("快速编译；")]),s._v(" "),t("li",[s._v("全局作用域；")]),s._v(" "),t("li",[s._v("难以分析；")]),s._v(" "),t("li",[s._v("难以扩展；")]),s._v(" "),t("li",[t("code",[s._v("_references")]),s._v("；")]),s._v(" "),t("li",[s._v("代码重用；")]),s._v(" "),t("li",[s._v("多目标；")]),s._v(" "),t("li",[s._v("单独编译；")])]),s._v(" "),t("h2",{attrs:{id:"运行时的错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行时的错误"}},[s._v("#")]),s._v(" 运行时的错误")]),s._v(" "),t("p",[s._v("如果你的代码依赖于上文中的 JavaScript，你可能会在运行时得到错误：")]),s._v(" "),t("ul",[t("li",[s._v("类的继承在运行时中断。")])]),s._v(" "),t("p",[s._v("有如下 "),t("code",[s._v("foo.ts")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("以及 "),t("code",[s._v("bar.ts")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Bar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果你没有按正确的顺序编译它（例如："),t("code",[s._v("tsc bar.ts foo.ts")]),s._v("），虽然它能够被编译成功，但是会在运行时抛出 "),t("code",[s._v("ReferenceError")]),s._v(" 的错误。")]),s._v(" "),t("ul",[t("li",[s._v("模块拆分在运行时会失败。")])]),s._v(" "),t("p",[t("code",[s._v("foo.ts")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" App "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" foo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("code",[s._v("bar.ts")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" App "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" bar "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" foo "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("456")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("与上文中一致，当你没有用正确的顺序编译它，它会在运行时将 "),t("code",[s._v("NaN")]),s._v(" 赋值给 "),t("code",[s._v("bar")]),s._v("；")]),s._v(" "),t("h2",{attrs:{id:"快速编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速编译"}},[s._v("#")]),s._v(" 快速编译")]),s._v(" "),t("p",[s._v("如果你使用 "),t("code",[s._v("--out")]),s._v(" 编译选项，而没有使用一些 "),t("code",[s._v("hacks")]),s._v(" 时，单独的 "),t("code",[s._v(".ts")]),s._v(" 文件是不会被编译成单独的 "),t("code",[s._v(".js")]),s._v(" 文件。 "),t("code",[s._v("--out")]),s._v(" 选项实际上使用了较慢的构建方式。")]),s._v(" "),t("p",[s._v("此外，由于 source map 基于长度编码，且对位置信息敏感，因此，大部分 source map 都会在编译时重新构建（如果你使用 source map）。")]),s._v(" "),t("h2",{attrs:{id:"全局作用域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局作用域"}},[s._v("#")]),s._v(" 全局作用域")]),s._v(" "),t("p",[s._v("当然，你可以使用命名空间，但是它仍然在 "),t("code",[s._v("window")]),s._v(" 上（如果你在浏览器中打开），命名空间仅仅是一个临时的解决方式。"),t("code",[s._v("///<reference")]),s._v(" 也不例外，它会引入一个难以维护的全局上下文。")]),s._v(" "),t("p",[s._v("如果你的公司有多个独立工作的团队，当有人决定尝试集成两个程序编写 app 时，则很可能存在命名冲突。")]),s._v(" "),t("h2",{attrs:{id:"难以分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#难以分析"}},[s._v("#")]),s._v(" 难以分析")]),s._v(" "),t("p",[s._v("我们希望提供更多代码分析工具。如果你提供调用链的依赖关系，这些将会变得简单。")]),s._v(" "),t("h2",{attrs:{id:"难以扩展"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#难以扩展"}},[s._v("#")]),s._v(" 难以扩展")]),s._v(" "),t("p",[s._v("实际上这是运行时的随机错误 + 编译时间时间慢 + 难以理解的代码的结果。")]),s._v(" "),t("h2",{attrs:{id:"references-ts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references-ts"}},[s._v("#")]),s._v(" "),t("code",[s._v("_references.ts")])]),s._v(" "),t("p",[s._v("它并没有被 "),t("code",[s._v("tsconfig.json")]),s._v(" 支持："),t("a",{attrs:{href:"https://github.com/Microsoft/TypeScript/issues/2472#issuecomment-85330803",target:"_blank",rel:"noopener noreferrer"}},[s._v("Comment"),t("OutboundLink")],1),s._v("，你需要手动对文件排序。")]),s._v(" "),t("h2",{attrs:{id:"代码重用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码重用"}},[s._v("#")]),s._v(" 代码重用")]),s._v(" "),t("p",[s._v("如果你想在另一个项目中重用存在隐式依赖关系的代码，如果没有错误提示，很难移植它。")]),s._v(" "),t("h2",{attrs:{id:"多目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多目标"}},[s._v("#")]),s._v(" 多目标")]),s._v(" "),t("p",[s._v("如果你想在 nodejs 之类的环境下重用在浏览器中的代码（如：testing APIS），你将不得不将其转换到新的模块系统或者使用不好的 "),t("code",[s._v("hacks")]),s._v("，让 nodejs 的 "),t("code",[s._v("global")]),s._v(" 成为你的新的全局变量（如："),t("code",[s._v("window")]),s._v("）。")]),s._v(" "),t("h2",{attrs:{id:"单独编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#单独编译"}},[s._v("#")]),s._v(" 单独编译")]),s._v(" "),t("p",[s._v("文件无法被单独编译，如 "),t("code",[s._v("a.ts")]),s._v("：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("根据不同的 "),t("code",[s._v("b.ts")]),s._v(" 的形式，它将有不同的输出：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("namespace")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("M")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("或者：")]),s._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("因此 "),t("code",[s._v("a.ts")]),s._v(" 不能被单独编译;")]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[t("code",[s._v("--out")]),s._v(" 做的是一些构建工具的工作，这些构建工具也可以受益于外部模块所提供的依赖，因此如果你愿意，我们推荐你使用外部模块，让构建工具创建单文件的 "),t("code",[s._v(".js")]),s._v("。")])])}),[],!1,null,null,null);a.default=r.exports}}]);