(window.webpackJsonp=window.webpackJsonp||[]).push([[551],{913:function(s,a,t){"use strict";t.r(a);var n=t(25),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),t("h1",{attrs:{id:"一、webpack-原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、webpack-原理"}},[s._v("#")]),s._v(" 一、Webpack 原理")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_1、构建作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、构建作用"}},[s._v("#")]),s._v(" 1、构建作用")]),s._v(" "),t("p",[s._v("构建工具就是将源代码转换成可执行的 "),t("code",[s._v("JavaScript")]),s._v("、"),t("code",[s._v("CSS")]),s._v("、"),t("code",[s._v("HTML")]),s._v(" 代码，包括以下内容：")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("代码转换：")]),s._v(" 将 "),t("code",[s._v("TypeScript")]),s._v(" 编译成 "),t("code",[s._v("JavaScript")]),s._v("、将 "),t("code",[s._v("SCSS")]),s._v(" 编译成 "),t("code",[s._v("CSS")]),s._v(" 等；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("文件优化：")]),s._v(" 压缩 "),t("code",[s._v("JavaScript")]),s._v("、"),t("code",[s._v("CSS")]),s._v("、"),t("code",[s._v("HTML")]),s._v(" 代码，压缩合并图片等；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("代码分割：")]),s._v(" 提取多个页面的公共代码，提取首屏不需要执行部分的代码，让其异步加载；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("模块合并：")]),s._v(" 在采用模块化的项目里会有很多个模块和文件，需要通过构建功能将模块分类合并成一个文件；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("自动刷新：")]),s._v(" 监听本地源代码的变化，自动重新构建、刷新浏览器；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("代码校验：")]),s._v(" 在代码被提交到仓库前需要校验代码是否符合规范，以及单元测试是否通过；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("自动发布：")]),s._v(" 更新代码后，自动构建出线上发布代码并传输给发布系统；")])])]),s._v(" "),t("h2",{attrs:{id:"_2、核心概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、核心概念"}},[s._v("#")]),s._v(" 2、核心概念")]),s._v(" "),t("p",[s._v("Webpack 有以下几个核心概念：")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("Entry：")]),s._v(" 入口，Webpack 执行构建的第一步将从 "),t("code",[s._v("entry")]),s._v(" 开始，可抽象成输入；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Module：")]),s._v(" 模块，配置处理模块的规则；在 Webpack 里一切皆模块，一个模块对应一个文件；Webpack 会从配置的 "),t("code",[s._v("Entry")]),s._v(" 开始递归找出所有依赖的模块；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Loader：")]),s._v(" 模块转换器，用于将模块的原内容按照需求转换成新内容；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Resolve：")]),s._v(" 配置寻找模块的规则；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Plugin：")]),s._v(" 扩展插件，在 Webpack 构建流程中的特定时机会广播对应的事件，插件可以监听这些事情的发生，在特定的时机做对应的事情；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Output：")]),s._v(" 输出结果，在 Webpack 经过一系列处理并得出最终想要的代码后输出结果；")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("Chunk：")]),s._v(" 代码块，一个 "),t("code",[s._v("Chunk")]),s._v(" 由多个模块组合而成，用于代码合并与分割；")])])]),s._v(" "),t("h2",{attrs:{id:"_3、流程概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、流程概述"}},[s._v("#")]),s._v(" 3、流程概述")]),s._v(" "),t("p",[s._v("（1）初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数；")]),s._v(" "),t("p",[s._v("（2）开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，通过执行对象的 run 方法开始执行编译；")]),s._v(" "),t("p",[s._v("（3）确定入口：根据配置中的 entry 找出所有入口文件；")]),s._v(" "),t("p",[s._v("（4）编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；")]),s._v(" "),t("p",[s._v("（5）完成模块编译：在经过第 4 步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容及它们之间的依赖关系；")]),s._v(" "),t("p",[s._v("（6）输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再将每个 Chunk 转换成一个单独的文件加入输出列表中，这是可以修改输出内容的最后机会；")]),s._v(" "),t("p",[s._v("（7）输出完成：在确定好输出内容后，根据配置确定输出的路径和文件名，将文件的内容写入文件系统中；")]),s._v(" "),t("p",[s._v("在以上过程中，"),t("code",[s._v("Webpack")]),s._v(" 会在特定的时间点广播特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 "),t("code",[s._v("Webpack")]),s._v(" 提供的 API 改变 "),t("code",[s._v("Webpack")]),s._v(" 的运行结果；")]),s._v(" "),t("h1",{attrs:{id:"二、webpack-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、webpack-配置"}},[s._v("#")]),s._v(" 二、Webpack 配置")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_1、webpack-项目初始化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、webpack-项目初始化"}},[s._v("#")]),s._v(" 1、Webpack 项目初始化")]),s._v(" "),t("h3",{attrs:{id:"_1、新建-web-项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、新建-web-项目"}},[s._v("#")]),s._v(" 1、新建 Web 项目")]),s._v(" "),t("p",[s._v("新建一个目录，再进入项目根目录执行 "),t("code",[s._v("npm init")]),s._v(" 来初始化最简单的采用了模块化开发的项目；最终生成 "),t("code",[s._v("package.json")]),s._v(" 文件；")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2、安装-webpack-到本项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装-webpack-到本项目"}},[s._v("#")]),s._v(" 2、安装 Webpack 到本项目")]),s._v(" "),t("p",[s._v("（1）查看 Webpack 版本")]),s._v(" "),t("p",[s._v("运行以下命令可以查看 Webpack 的版本号")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" view webpack versions\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（2）安装 Webpack")]),s._v(" "),t("p",[s._v("可以选择（1）步骤罗列得到的 Webpack 版本号，也可以安装最新稳定版、最新体验版本，相关命令如下所示，选择安装 4.28.2 版本（没有为什么，就想装个 4.x 的版本）；")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("// 安装指定版本\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D webpack@4.28.2\n\n// 安装最新稳定版\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D webpack\n\n// 安装最新体验版本\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D webpack@beta\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("（3）安装 Webpack 脚手架")]),s._v(" "),t("p",[s._v("需要安装 "),t("code",[s._v("Webpack")]),s._v(" 脚手架，才能在命令窗口执行 "),t("code",[s._v("Webpack")]),s._v(" 命令，运行以下命令安装 "),t("code",[s._v("Webpack")]),s._v(" 脚手架；")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D webpack-cli\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3、使用-webpack"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、使用-webpack"}},[s._v("#")]),s._v(" 3、使用 Webpack")]),s._v(" "),t("p",[s._v("使用 Webpack 构建一个采用 "),t("code",[s._v("CommonJS")]),s._v(" 模块化编写的项目；")]),s._v(" "),t("p",[s._v("（1）新建页面入口文件 "),t("code",[s._v("index.html")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token doctype"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<!")]),t("span",{pre:!0,attrs:{class:"token doctype-tag"}},[s._v("DOCTYPE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token name"}},[s._v("html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("html")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("lang")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("en"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("head")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("charset")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("UTF-8"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("viewport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("width=device-width, initial-scale=1.0"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("meta")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("http-equiv")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("X-UA-Compatible"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("ie=edge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("Webpack"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("title")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("head")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!--导入 Webpack 输出的 JavaScript 文件--\x3e")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./dist/bundle.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("body")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("html")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("（2）新建需要用到的 JS 文件")]),s._v(" "),t("blockquote",[t("p",[s._v("show.js 文件")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 操作 DOM 元素，把 content 显示到网页上")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("show")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("document"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getElementById")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'app'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("innerText "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello,'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过 CommonJS 规范导出 show 函数")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" show"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("blockquote",[t("p",[s._v("main.js 文件")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过 CommonJS 规范导入 show 函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" show "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./show.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行 show 函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("show")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Webpack'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("（3）新建 Webpack 配置文件 webpack.config.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// JavaScript 执行入口文件")]),s._v("\n  entry"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./main.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  output"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 把所有依赖的模块合并输出到一个 bundle.js 文件")]),s._v("\n    filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bundle.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 输出文件都放到 dist 目录下")]),s._v("\n    path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dist'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[s._v("（4）执行 webpack 命令进行构建")]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("package.json")]),s._v(" 文件中配置编译命令，如下所示：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --config webpack.config.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("执行以下命令进行项目的 "),t("code",[s._v("Webpack")]),s._v(" 编译，成功后会在项目根目录下生成编译目录 "),t("code",[s._v("dist")]),s._v(" ；")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run build\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（5）运行 index.html")]),s._v(" "),t("p",[s._v("编译成功后，用浏览器打开 "),t("code",[s._v("index.html")]),s._v(" 文件，能看到页面成功显示 “Hello Webpack”；")]),s._v(" "),t("h2",{attrs:{id:"_2、loader-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、loader-配置"}},[s._v("#")]),s._v(" 2、Loader 配置")]),s._v(" "),t("p",[s._v("本节通过为之前的例子添加样式，来尝试使用 "),t("code",[s._v("Loader")]),s._v("；")]),s._v(" "),t("h3",{attrs:{id:"_1-新建样式文件-main-css"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建样式文件-main-css"}},[s._v("#")]),s._v(" （1）新建样式文件 main.css")]),s._v(" "),t("div",{staticClass:"language-css line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-css"}},[t("code",[t("span",{pre:!0,attrs:{class:"token selector"}},[s._v("#app")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("text-align")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" center"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v("color")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'#999'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"_2-将-main-css-文件引入入口文件-main-js-中-如下所示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-将-main-css-文件引入入口文件-main-js-中-如下所示"}},[s._v("#")]),s._v(" （2）将 main.css 文件引入入口文件 main.js 中，如下所示：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过 CommonJS 规范导入 CSS 模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./main.css'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 通过 CommonJS 规范导入 show 函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" show "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./show.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行 show 函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("show")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Webpack'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_3-loader-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-loader-配置"}},[s._v("#")]),s._v(" （3）Loader 配置")]),s._v(" "),t("p",[s._v("以上修改后去执行 "),t("code",[s._v("Webpack")]),s._v(" 构建是会报错的，因为 "),t("code",[s._v("Webpack")]),s._v(" 不原生支持解析 "),t("code",[s._v("CSS")]),s._v(" 文件。要支持非 "),t("code",[s._v("JavaScript")]),s._v(" 类型的文件，需要使用 "),t("code",[s._v("Webpack")]),s._v(" 的 "),t("code",[s._v("Loader")]),s._v(" 机制；")]),s._v(" "),t("p",[s._v("（3.1）运行以下命令，安装 "),t("code",[s._v("style-loader")]),s._v(" 和 "),t("code",[s._v("css-loader")]),s._v("，其中：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("css-loader")]),s._v(" 用于读取 "),t("code",[s._v("CSS")]),s._v(" 文件；")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("style-loader")]),s._v(" 把 "),t("code",[s._v("CSS")]),s._v(" 内容注入到 "),t("code",[s._v("JavaScript")]),s._v(" 中；")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D style-loader css-loader\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("（3.2）进行以下配置")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用正则去匹配要用该 loader 转换的 CSS 文件")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h3",{attrs:{id:"_4-查看结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看结果"}},[s._v("#")]),s._v(" （4）查看结果")]),s._v(" "),t("p",[s._v("编译后，刷新 "),t("code",[s._v("index.html")]),s._v(" ，查看刚刚的样式 "),t("code",[s._v("loader")]),s._v(" 已经起作用；")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdeb77f673c.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdeb77f673c.jpg",alt:"demo"}})])]),s._v(" "),t("h2",{attrs:{id:"_3、plugin-配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、plugin-配置"}},[s._v("#")]),s._v(" 3、Plugin 配置")]),s._v(" "),t("h3",{attrs:{id:"_1-安装样式提取插件-extract-text-webpack-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装样式提取插件-extract-text-webpack-plugin"}},[s._v("#")]),s._v(" （1）安装样式提取插件 extract-text-webpack-plugin")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D extract-text-webpack-plugin@next\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-plugin-文件配置如下"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-plugin-文件配置如下"}},[s._v("#")]),s._v(" （2）plugin 文件配置如下")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用正则去匹配要用该 loader 转换的 CSS 文件")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("ExtractTextPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("extract")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\nplugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ExtractTextPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从 .js 文件中提取出来的 .css 文件的名称")]),s._v("\n        filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("[name]_[hash:8].css")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"_3-查看结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-查看结果"}},[s._v("#")]),s._v(" （3）查看结果")]),s._v(" "),t("p",[s._v("通过以上配置后，执行 "),t("code",[s._v("Webapack")]),s._v(" 的执行命令，发现在 "),t("code",[s._v("dist")]),s._v(" 目录下，生成对应的 "),t("code",[s._v("css")]),s._v(" 文件；存在的坑点：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("需要手动将生成的 "),t("code",[s._v("css")]),s._v(" 文件引入到 "),t("code",[s._v("index.html")]),s._v(" 中；")])]),s._v(" "),t("li",[t("p",[s._v("修改 "),t("code",[s._v("css")]),s._v(" 文件后，会生成新的 "),t("code",[s._v("css")]),s._v(" 文件，原先的不会删除；")])])]),s._v(" "),t("h2",{attrs:{id:"_4、使用-devserver"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、使用-devserver"}},[s._v("#")]),s._v(" 4、使用 DevServer")]),s._v(" "),t("h3",{attrs:{id:"_1-执行以下命令安装-webpack-dev-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-执行以下命令安装-webpack-dev-server"}},[s._v("#")]),s._v(" （1）执行以下命令安装 webpack-dev-server")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D  webpack-dev-server\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在 package.json 中配置启动命令")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack --config webpack.config.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-dev-server"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("运行命令后，就可以启动 "),t("code",[s._v("HTTP")]),s._v(" 服务")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" run dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("启动结果如下所示，可以通过 "),t("code",[s._v("http://localhost:8080/")]),s._v(" 访问的 "),t("code",[s._v("index.html")]),s._v(" 的demo")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdec2f9318d.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdec2f9318d.jpg",alt:"demo"}})])]),s._v(" "),t("h3",{attrs:{id:"_2-实时预览"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-实时预览"}},[s._v("#")]),s._v(" （2）实时预览")]),s._v(" "),t("p",[s._v("在运行命令后面添加参数 "),t("code",[s._v("--watch")]),s._v(" 实现实时预览，配置如下所示：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dev"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"webpack-dev-server --watch"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("在 "),t("code",[s._v("index.html")]),s._v(" 中需要将 js 的路径修改为：")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("bundle.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("  \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("而不能是之前的（因为这个是编译生成的，并不是通过 "),t("code",[s._v("devServer")]),s._v(" 生成放在内存的）")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("script")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("src")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("./dist/bundle.js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),t("span",{pre:!0,attrs:{class:"token script"}}),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("</")]),s._v("script")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_3-模块热替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-模块热替换"}},[s._v("#")]),s._v(" （3）模块热替换")]),s._v(" "),t("p",[s._v("可以通过配置 "),t("code",[s._v("--hot")]),s._v(" 进行模块热替换；")]),s._v(" "),t("h1",{attrs:{id:"四、编写-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、编写-loader"}},[s._v("#")]),s._v(" 四、编写 Loader")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_1、loader-要点总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、loader-要点总结"}},[s._v("#")]),s._v(" 1、Loader 要点总结")]),s._v(" "),t("h3",{attrs:{id:"_1-loader-为模块转换器-用于将模块的原内容按照需求转换成新内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-loader-为模块转换器-用于将模块的原内容按照需求转换成新内容"}},[s._v("#")]),s._v(" （1）Loader 为模块转换器，用于将模块的原内容按照需求转换成新内容；")]),s._v(" "),t("h3",{attrs:{id:"_2-loader-的职责是单一的-只需要完成一种转换-遵守单一职责原则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-loader-的职责是单一的-只需要完成一种转换-遵守单一职责原则"}},[s._v("#")]),s._v(" （2）Loader 的职责是单一的，只需要完成一种转换，遵守单一职责原则；")]),s._v(" "),t("h3",{attrs:{id:"_3-webpack-为-loader-提供了一系列-api-供-loader-调用-例如"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-webpack-为-loader-提供了一系列-api-供-loader-调用-例如"}},[s._v("#")]),s._v(" （3）Webpack 为 Loader 提供了一系列 API 供 Loader 调用，例如：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("loader-utils.getOptions( this )")]),s._v(" 获取用户传入的 options，")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("this.callback( )")]),s._v(" 自定义返回结果，")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("this.async( )")]),s._v(" 支持异步操作；")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("this.context")]),s._v(" 当前文件所在的目录；")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("this.resource")]),s._v(" 当前处理文件的完整请求路径；")])])]),s._v(" "),t("h2",{attrs:{id:"_2、编写-loader-源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、编写-loader-源码"}},[s._v("#")]),s._v(" 2、编写 loader 源码")]),s._v(" "),t("h3",{attrs:{id:"_1-源码编写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-源码编写"}},[s._v("#")]),s._v(" （1）源码编写")]),s._v(" "),t("p",[s._v("在原有的项目底下，新建目录 "),t("code",[s._v("custom-loader")]),s._v(" 作为编写 "),t("code",[s._v("loader")]),s._v(" 的名称，执行 "),t("code",[s._v("npm init")]),s._v(" 命令，新建一个模块化项目，然后新建 "),t("code",[s._v("index.js")]),s._v(" 文件，相关源码如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("source")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" source "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" source"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("replace")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("hello")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-flags"}},[s._v("gi")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'HELLO'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("exports")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("convert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"_2-npm-link-模块注册"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-npm-link-模块注册"}},[s._v("#")]),s._v(" （2）Npm link 模块注册")]),s._v(" "),t("p",[s._v("正常安装 "),t("code",[s._v("Loader")]),s._v(" 是从 "),t("code",[s._v("Npm")]),s._v(" 公有仓库安装，也即将 "),t("code",[s._v("Loader")]),s._v(" 发布到 "),t("code",[s._v("Npm")]),s._v(" 仓库，然后再安装到本地使用；但是可以使用 "),t("code",[s._v("Npm link")]),s._v(" 做到在不发布模块的情况下，将本地的一个正在开发的模块的源码链接到项目的 "),t("code",[s._v("node_modules")]),s._v(" 目录下，让项目可以直接使用本地的 "),t("code",[s._v("Npm")]),s._v(" 模块；")]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("custom-loader")]),s._v(" 目录底下，运行以下命令，将本地模块注册到全局：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("成功结果如下：")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdeb2b4fa5e.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdeb2b4fa5e.jpg",alt:"demo"}})])]),s._v(" "),t("p",[s._v("然后在项目根目录执行以下命令，将注册到全局的本地 "),t("code",[s._v("Npm")]),s._v(" 模块链接到项目的 "),t("code",[s._v("node_modules")]),s._v(" 下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" custom-loader\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("成功结果如下，并且在 "),t("code",[s._v("node_modules")]),s._v(" 目录下能查找到对应的 "),t("code",[s._v("loader")]),s._v("；")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdebc0fc0bb.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdebc0fc0bb.jpg",alt:"demo"}})])]),s._v(" "),t("h2",{attrs:{id:"_3、webpack-中配置编写的-loader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、webpack-中配置编写的-loader"}},[s._v("#")]),s._v(" 3、Webpack 中配置编写的 loader")]),s._v(" "),t("p",[s._v("该配置跟第一章节的 "),t("code",[s._v("Webpack")]),s._v(" 配置并没有任何区别，这里不再详述，配置参考如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("module"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.js")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'custom-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            include"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__dirname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'show'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("执行运行 "),t("code",[s._v("or")]),s._v(" 编译命令，就能看到的 "),t("code",[s._v("loader")]),s._v(" 起作用了。")]),s._v(" "),t("h1",{attrs:{id:"五、编写-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、编写-plugin"}},[s._v("#")]),s._v(" 五、编写 Plugin")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_1、plugin-要点总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、plugin-要点总结"}},[s._v("#")]),s._v(" 1、Plugin 要点总结")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("Webpack")]),s._v(" 在编译过程中，会广播很多事件，例如 "),t("code",[s._v("run")]),s._v("、"),t("code",[s._v("compile")]),s._v("、"),t("code",[s._v("done")]),s._v("、"),t("code",[s._v("fail")]),s._v(" 等等，可以查看官网；")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("Webpack")]),s._v(" 的事件流机制应用了观察者模式，编写的插件可以监听 "),t("code",[s._v("Webpack")]),s._v(" 事件来触发对应的处理逻辑；")])]),s._v(" "),t("li",[t("p",[s._v("插件中可以使用很多 "),t("code",[s._v("Webpack")]),s._v(" 提供的 "),t("code",[s._v("API")]),s._v("，例如读取输出资源、代码块、模块及依赖等；")])])]),s._v(" "),t("h2",{attrs:{id:"_2、编写-plugin-源码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、编写-plugin-源码"}},[s._v("#")]),s._v(" 2、编写 Plugin 源码")]),s._v(" "),t("p",[s._v("手写一个 "),t("code",[s._v("plugin")]),s._v(" 源码，其功能是在 "),t("code",[s._v("Webpack")]),s._v(" 编译成功或者失败时输出提示；当然这个 "),t("code",[s._v("plugin")]),s._v(" 其实没啥实际意义，纯碎是为了写 "),t("code",[s._v("plugin")]),s._v(" 而写 "),t("code",[s._v("plugin")]),s._v("；当然如果你实际业务有需要编写 "),t("code",[s._v("plugin")]),s._v(" 需求，那就要反思这个业务的合理性，因为庞大的社区，一般合理的需求都能找到对应的 "),t("code",[s._v("plugin")]),s._v("。")]),s._v(" "),t("h3",{attrs:{id:"_1-源码编写-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-源码编写-2"}},[s._v("#")]),s._v(" （1）源码编写")]),s._v(" "),t("p",[s._v("在原有的项目底下，新建目录 "),t("code",[s._v("custom-plugin")]),s._v(" 作为编写 "),t("code",[s._v("plugin")]),s._v(" 的名称，执行 "),t("code",[s._v("npm init")]),s._v(" 命令，新建一个模块化项目，然后新建 "),t("code",[s._v("index.js")]),s._v(" 文件，相关源码如下：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("doneCallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" failCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 保存在创建插件实例时传入的回调函数")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("doneCallback "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" doneCallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failCallback "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" failCallback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("apply")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("compiler")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 成功完成一次完整的编译和输出流程时，会触发 done 事件")]),s._v("\n        compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'done'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("doneCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("stats"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在编译和输出的流程中遇到异常时，会触发 failed 事件")]),s._v("\n        compiler"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("plugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'failed'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("failCallback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" CustomPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("h3",{attrs:{id:"_2-npm-link-模块注册-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-npm-link-模块注册-2"}},[s._v("#")]),s._v(" （2）Npm link 模块注册")]),s._v(" "),t("p",[s._v("跟 "),t("code",[s._v("Loader")]),s._v(" 注册一样，使用 "),t("code",[s._v("npm link")]),s._v(" 进行注册；")]),s._v(" "),t("p",[s._v("在 "),t("code",[s._v("custom-plugin")]),s._v(" 目录底下，运行以下命令，将本地模块注册到全局：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("然后在项目根目录执行以下命令，将注册到全局的本地 "),t("code",[s._v("Npm")]),s._v(" 模块链接到项目的 "),t("code",[s._v("node_modules")]),s._v(" 下：")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v(" custom-plugin\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("如果一切顺利，可以在 "),t("code",[s._v("node_modules")]),s._v(" 目录下能查找到对应的 "),t("code",[s._v("plugin")]),s._v("；")]),s._v(" "),t("h2",{attrs:{id:"_3、webpack-中配置编写的-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、webpack-中配置编写的-plugin"}},[s._v("#")]),s._v(" 3、Webpack 中配置编写的 plugin")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CustomPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("stats")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编译成功!'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'编译失败!'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("执行运行 "),t("code",[s._v("or")]),s._v(" 编译命令，就能看到的 "),t("code",[s._v("plugin")]),s._v(" 起作用了。")]),s._v(" "),t("h1",{attrs:{id:"六、踩坑汇总"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、踩坑汇总"}},[s._v("#")]),s._v(" 六、踩坑汇总")]),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_1、css-loader-以下配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、css-loader-以下配置"}},[s._v("#")]),s._v(" 1、css-loader 以下配置")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("rules"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 用正则去匹配要用该 loader 转换的 CSS 文件")]),s._v("\n        test"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token regex"}},[t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[s._v("\\.css$")]),t("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[s._v("/")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        use"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'style-loader'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'css-loader?minimize'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("报以下错误:")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v(" - options has an unknown property 'minimize'. These properties are valid:\n   object { url?, import?, modules?, sourceMap?, importLoaders?, localsConvention?, onlyLocals?, esModule? }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("原因：")])]),s._v(" "),t("p",[t("code",[s._v("minimize")]),s._v(" 属性在新版本已经被移除，")]),s._v(" "),t("p",[t("strong",[s._v("解决：")])]),s._v(" "),t("p",[s._v("先去掉 "),t("code",[s._v("minimize")]),s._v(" 选项；")]),s._v(" "),t("h2",{attrs:{id:"_2、extracttextplugin-编译以下错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、extracttextplugin-编译以下错误"}},[s._v("#")]),s._v(" 2、ExtractTextPlugin 编译以下错误：")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdec2ef858f.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdec2ef858f.jpg",alt:"demo"}})])]),s._v(" "),t("p",[t("strong",[s._v("原因：")])]),s._v(" "),t("p",[t("code",[s._v("extract-text-webpack-plugin")]),s._v(" 版本号问题")]),s._v(" "),t("p",[t("strong",[s._v("解决：")])]),s._v(" "),t("p",[s._v("重新安装 "),t("code",[s._v("extract-text-webpack-plugin")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i -D extract-text-webpack-plugin@next\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_3、修复第2个坑之后-extracttextplugin-编译继续报以下错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、修复第2个坑之后-extracttextplugin-编译继续报以下错误"}},[s._v("#")]),s._v(" 3、修复第2个坑之后，ExtractTextPlugin 编译继续报以下错误：")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdeb8188d88.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdeb8188d88.jpg",alt:"demo"}})])]),s._v(" "),t("p",[t("strong",[s._v("原因：")])]),s._v(" "),t("p",[s._v("不存在 "),t("code",[s._v("contenthash")]),s._v(" 这个变量")]),s._v(" "),t("p",[t("strong",[s._v("解决：")])]),s._v(" "),t("p",[s._v("更改 "),t("code",[s._v("extract-text-webpack-plugin")]),s._v(" 的配置：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("plugins"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ExtractTextPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 从 .js 文件中提取出来的 .css 文件的名称")]),s._v("\n       filename"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("[name]_[hash:8].css")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_4、添加-happypack-后-编译-css-文件时报以下错误"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、添加-happypack-后-编译-css-文件时报以下错误"}},[s._v("#")]),s._v(" 4、添加 HappyPack 后，编译 CSS 文件时报以下错误：")]),s._v(" "),t("p",[t("a",{attrs:{"data-fancybox":"",title:"demo",href:"/notes/assets/webpack/16f8ccdf66204a16.jpg"}},[t("img",{attrs:{src:"/notes/assets/webpack/16f8ccdf66204a16.jpg",alt:"demo"}})])]),s._v(" "),t("p",[t("strong",[s._v("原因：")])]),s._v(" "),t("p",[t("code",[s._v("css-loader")]),s._v(" 版本的问题")]),s._v(" "),t("p",[t("strong",[s._v("解决：")])]),s._v(" "),t("p",[s._v("重新安装 "),t("code",[s._v("css-loader@3.2.0")])])])}),[],!1,null,null,null);a.default=e.exports}}]);