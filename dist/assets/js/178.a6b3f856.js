(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{540:function(t,s,_){"use strict";_.r(s);var v=_(25),e=Object(v.a)({},(function(){var t=this,s=t.$createElement,_=t._self._c||s;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"_1-http-https-协议"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-http-https-协议"}},[t._v("#")]),t._v(" "),_("strong",[t._v("1. http/https 协议")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("1.0 协议缺陷:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("无法复用链接，完成即断开，"),_("strong",[t._v("重新慢启动和 TCP 3次握手")])])]),t._v(" "),_("li",[_("p",[t._v("head of line blocking: "),_("strong",[t._v("线头阻塞")]),t._v("，导致请求之间互相影响")])])])]),t._v(" "),_("li",[_("p",[t._v("1.1 改进:")]),t._v(" "),_("ul",[_("li",[_("p",[_("strong",[t._v("长连接")]),t._v("(默认 keep-alive)，复用")])]),t._v(" "),_("li",[_("p",[t._v("host 字段指定对应的虚拟站点")])]),t._v(" "),_("li",[_("p",[t._v("新增功能:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("断点续传")])]),t._v(" "),_("li",[_("p",[t._v("身份认证")])]),t._v(" "),_("li",[_("p",[t._v("状态管理")])]),t._v(" "),_("li",[_("p",[t._v("cache 缓存")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("Cache-Control")])]),t._v(" "),_("li",[_("p",[t._v("Expires")])]),t._v(" "),_("li",[_("p",[t._v("Last-Modified")])]),t._v(" "),_("li",[_("p",[t._v("Etag")])])])])])])])]),t._v(" "),_("li",[_("p",[t._v("2.0:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("多路复用")])]),t._v(" "),_("li",[_("p",[t._v("二进制分帧层: 应用层和传输层之间")])]),t._v(" "),_("li",[_("p",[t._v("首部压缩")])]),t._v(" "),_("li",[_("p",[t._v("服务端推送")])])])]),t._v(" "),_("li",[_("p",[t._v("https: 较为安全的网络传输协议")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("证书(公钥)")])]),t._v(" "),_("li",[_("p",[t._v("SSL 加密")])]),t._v(" "),_("li",[_("p",[t._v("端口 443")])])])]),t._v(" "),_("li",[_("p",[t._v("TCP:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("三次握手")])]),t._v(" "),_("li",[_("p",[t._v("四次挥手")])]),t._v(" "),_("li",[_("p",[t._v("滑动窗口: 流量控制")])]),t._v(" "),_("li",[_("p",[t._v("拥塞处理")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("慢开始")])]),t._v(" "),_("li",[_("p",[t._v("拥塞避免")])]),t._v(" "),_("li",[_("p",[t._v("快速重传")])]),t._v(" "),_("li",[_("p",[t._v("快速恢复")])])])])])]),t._v(" "),_("li",[_("p",[t._v("缓存策略: 可分为 "),_("strong",[t._v("强缓存")]),t._v(" 和 "),_("strong",[t._v("协商缓存")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("Cache-Control/Expires: 浏览器判断缓存是否过期，未过期时，直接使用强缓存，"),_("strong",[t._v("Cache-Control的 max-age 优先级高于 Expires")])])]),t._v(" "),_("li",[_("p",[t._v("当缓存已经过期时，使用协商缓存")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("唯一标识方案: Etag(response 携带) & If-None-Match(request携带，上一次返回的 Etag): 服务器判断资源是否被修改，")])]),t._v(" "),_("li",[_("p",[t._v("最后一次修改时间: Last-Modified(response) & If-Modified-Since (request，上一次返回的Last-Modified)")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("如果一致，则直接返回 304 通知浏览器使用缓存")])]),t._v(" "),_("li",[_("p",[t._v("如不一致，则服务端返回新的资源")])])])])])])])])]),t._v(" "),_("h2",{attrs:{id:"_2-常见状态码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-常见状态码"}},[t._v("#")]),t._v(" "),_("strong",[t._v("2. 常见状态码")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("1xx: 接受，继续处理")])]),t._v(" "),_("li",[_("p",[t._v("200: 成功，并返回数据")])]),t._v(" "),_("li",[_("p",[t._v("201: 已创建")])]),t._v(" "),_("li",[_("p",[t._v("202: 已接受")])]),t._v(" "),_("li",[_("p",[t._v("203: 成为，但未授权")])]),t._v(" "),_("li",[_("p",[t._v("204: 成功，无内容")])]),t._v(" "),_("li",[_("p",[t._v("205: 成功，重置内容")])]),t._v(" "),_("li",[_("p",[t._v("206: 成功，部分内容")])]),t._v(" "),_("li",[_("p",[t._v("301: 永久移动，重定向")])]),t._v(" "),_("li",[_("p",[t._v("302: 临时移动，可使用原有URI")])]),t._v(" "),_("li",[_("p",[t._v("304: 资源未修改，可使用缓存")])]),t._v(" "),_("li",[_("p",[t._v("305: 需代理访问")])]),t._v(" "),_("li",[_("p",[t._v("400: 请求语法错误")])]),t._v(" "),_("li",[_("p",[t._v("401: 要求身份认证")])]),t._v(" "),_("li",[_("p",[t._v("403: 拒绝请求")])]),t._v(" "),_("li",[_("p",[t._v("404: 资源不存在")])]),t._v(" "),_("li",[_("p",[t._v("500: 服务器错误")])])]),t._v(" "),_("h2",{attrs:{id:"_3-get-post"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-get-post"}},[t._v("#")]),t._v(" "),_("strong",[t._v("3. get / post")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("get: 缓存、请求长度受限、会被历史保存记录")]),t._v(" "),_("ul",[_("li",[t._v("无副作用(不修改资源)，幂等(请求次数与资源无关)的场景")])])]),t._v(" "),_("li",[_("p",[t._v("post: 安全、大数据、更多编码类型")])])]),t._v(" "),_("p",[t._v("两者详细对比如下图:")]),t._v(" "),_("p",[_("a",{attrs:{"data-fancybox":"",title:"get&post对比",href:"https://user-gold-cdn.xitu.io/2019/2/14/168e9d9050b9d08a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"}},[_("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2019/2/14/168e9d9050b9d08a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"get&post对比"}})])]),t._v(" "),_("p",[_("a",{attrs:{href:"https://user-gold-cdn.xitu.io/2019/2/14/168e9d9050b9d08a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("get&post对比"),_("OutboundLink")],1)]),t._v(" "),_("h2",{attrs:{id:"_4-websocket"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-websocket"}},[t._v("#")]),t._v(" "),_("strong",[t._v("4. Websocket")])]),t._v(" "),_("p",[t._v("Websocket 是一个 "),_("strong",[t._v("持久化的协议")]),t._v("， 基于 http ， 服务端可以 "),_("strong",[t._v("主动 push")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("兼容：")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("FLASH Socket")])]),t._v(" "),_("li",[_("p",[t._v("长轮询： 定时发送 ajax")])]),t._v(" "),_("li",[_("p",[t._v("long poll： 发送 --\x3e 有消息时再 response")])])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("new WebSocket(url)")])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("ws.onerror = fn")])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("ws.onclose = fn")])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("ws.onopen = fn")])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("ws.onmessage = fn")])])]),t._v(" "),_("li",[_("p",[_("code",[t._v("ws.send()")])])])]),t._v(" "),_("p",[_("strong",[t._v("引申的问题：")])]),t._v(" "),_("blockquote",[_("p",[t._v("对于低端不支持websocket的浏览器，一般有几个解决方案")])]),t._v(" "),_("ol",[_("li",[_("p",[t._v("使用轮询或长连接的方式实现伪"),_("code",[t._v("websocket")]),t._v("的通信")])]),t._v(" "),_("li",[_("p",[t._v("使用flash或其他方法实现一个"),_("a",{attrs:{href:"https://segmentfault.com/q/1010000005000671/a-1020000005003936",target:"_blank",rel:"noopener noreferrer"}},[_("code",[t._v("websocket")]),t._v("客户端"),_("OutboundLink")],1)])]),t._v(" "),_("li",[_("p",[t._v("引入"),_("code",[t._v("SockJS")]),t._v("库，他是JavaScript的一个库，支持"),_("code",[t._v("websocket")]),t._v("的浏览器会优先使用原生的websorcket，如果不支持，则会使用引用的库文件。")])]),t._v(" "),_("li",[_("p",[t._v("引用"),_("code",[t._v("socket.IO")]),t._v("的库文件，这同样是基于时间的双向通信，如何不支持则会使用替代的方案。")])])]),t._v(" "),_("h2",{attrs:{id:"_5-tcp三次握手"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_5-tcp三次握手"}},[t._v("#")]),t._v(" "),_("strong",[t._v("5. TCP三次握手")])]),t._v(" "),_("p",[t._v("建立连接前，客户端和服务端需要通过握手来确认对方:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("客户端发送 syn(同步序列编号) 请求，进入 syn_send 状态，等待确认")])]),t._v(" "),_("li",[_("p",[t._v("服务端接收并确认 syn 包后发送 syn+ack 包，进入 syn_recv 状态")])]),t._v(" "),_("li",[_("p",[t._v("客户端接收 syn+ack 包后，发送 ack 包，双方进入 established 状态")])])]),t._v(" "),_("h2",{attrs:{id:"_6-tcp四次挥手"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-tcp四次挥手"}},[t._v("#")]),t._v(" "),_("strong",[t._v("6. TCP四次挥手")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("客户端 -- FIN --\x3e 服务端， FIN—WAIT")])]),t._v(" "),_("li",[_("p",[t._v("服务端 -- ACK --\x3e 客户端， CLOSE-WAIT")])]),t._v(" "),_("li",[_("p",[t._v("服务端 -- ACK,FIN --\x3e 客户端， LAST-ACK")])]),t._v(" "),_("li",[_("p",[t._v("客户端 -- ACK --\x3e 服务端，CLOSED")])])]),t._v(" "),_("h2",{attrs:{id:"_7-node-的-event-loop-6个阶段"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_7-node-的-event-loop-6个阶段"}},[t._v("#")]),t._v(" "),_("strong",[t._v("7. Node 的 Event Loop: 6个阶段")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("timer 阶段: 执行到期的"),_("code",[t._v("setTimeout / setInterval")]),t._v("队列回调")])]),t._v(" "),_("li",[_("p",[t._v("I/O 阶段: 执行上轮循环残流的"),_("code",[t._v("callback")])])]),t._v(" "),_("li",[_("p",[t._v("idle, prepare")])]),t._v(" "),_("li",[_("p",[t._v("poll: 等待回调")]),t._v(" "),_("ol",[_("li",[_("p",[t._v("执行回调")])]),t._v(" "),_("li",[_("p",[t._v("执行定时器")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("如有到期的"),_("code",[t._v("setTimeout / setInterval")]),t._v("， 则返回 timer 阶段")])]),t._v(" "),_("li",[_("p",[t._v("如有"),_("code",[t._v("setImmediate")]),t._v("，则前往 check 阶段")])])])])])]),t._v(" "),_("li",[_("p",[t._v("check")]),t._v(" "),_("ul",[_("li",[t._v("执行"),_("code",[t._v("setImmediate")])])])]),t._v(" "),_("li",[_("p",[t._v("close callbacks")])])]),t._v(" "),_("h2",{attrs:{id:"_8-跨域"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_8-跨域"}},[t._v("#")]),t._v(" "),_("strong",[t._v("8.跨域")])]),t._v(" "),_("ul",[_("li",[t._v("JSONP: 利用"),_("code",[t._v("<script>")]),t._v("标签不受跨域限制的特点，缺点是只能支持 get 请求")])]),t._v(" "),_("div",{staticClass:"language-javascript line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-javascript"}},[_("code",[_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("jsonp")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("url"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" jsonpCallback"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" success")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" script "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'script'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    script"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" url\n    script"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("async "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    script"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/javascript'")]),t._v("\n    window"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("jsonpCallback"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),_("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        success "),_("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    document"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),_("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br"),_("span",{staticClass:"line-number"},[t._v("9")]),_("br"),_("span",{staticClass:"line-number"},[t._v("10")]),_("br")])]),_("ul",[_("li",[_("p",[t._v("设置 "),_("code",[t._v("CORS: Access-Control-Allow-Origin：*")])])]),t._v(" "),_("li",[_("p",[t._v("postMessage")])])]),t._v(" "),_("p",[_("strong",[t._v("9.安全")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("XSS攻击: 注入恶意代码")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("cookie 设置 httpOnly")])]),t._v(" "),_("li",[_("p",[t._v("转义页面上的输入内容和输出内容")])])])]),t._v(" "),_("li",[_("p",[t._v("CSRF: 跨站请求伪造，防护:")]),t._v(" "),_("ul",[_("li",[_("p",[t._v("get 不修改数据")])]),t._v(" "),_("li",[_("p",[t._v("不被第三方网站访问到用户的 cookie")])]),t._v(" "),_("li",[_("p",[t._v("设置白名单，不被第三方网站请求")])]),t._v(" "),_("li",[_("p",[t._v("请求校验")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);