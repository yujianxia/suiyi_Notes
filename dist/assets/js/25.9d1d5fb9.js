(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{386:function(s,t,n){"use strict";n.r(t);var a=n(25),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:""}},[n("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),n("h1",{attrs:{id:"事件模块的注入模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件模块的注入模式"}},[s._v("#")]),s._v(" 事件模块的注入模式")]),s._v(" "),n("p",[s._v("React 为了跨平台，对于事件体系的代码做出了一些妥协，采用动态注入的方式让不同的平台对事件核心模块进行插件注入。先来看"),n("code",[s._v("ReactDOM")]),s._v("的入口文件，里面有这么一句代码："),n("code",[s._v("import './ReactDOMClientInjection';")]),s._v("，这就是注入的开始，这个 js 的代码如下：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" EventPluginHub "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'events/EventPluginHub'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" EventPluginUtils "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'events/EventPluginUtils'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  getFiberCurrentPropsFromNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  getInstanceFromNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  getNodeFromInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./ReactDOMComponentTree'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" BeforeInputEventPlugin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/BeforeInputEventPlugin'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" ChangeEventPlugin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/ChangeEventPlugin'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" DOMEventPluginOrder "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/DOMEventPluginOrder'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" EnterLeaveEventPlugin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/EnterLeaveEventPlugin'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" SelectEventPlugin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/SelectEventPlugin'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" SimpleEventPlugin "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../events/SimpleEventPlugin'")]),s._v("\n\nEventPluginHub"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("injection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("injectEventPluginOrder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DOMEventPluginOrder"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEventPluginUtils"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("setComponentTree")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  getFiberCurrentPropsFromNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  getInstanceFromNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  getNodeFromInstance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nEventPluginHub"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("injection"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("injectEventPluginsByName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  SimpleEventPlugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" SimpleEventPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  EnterLeaveEventPlugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" EnterLeaveEventPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ChangeEventPlugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangeEventPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  SelectEventPlugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" SelectEventPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  BeforeInputEventPlugin"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" BeforeInputEventPlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("通过这两个方法向事件系统注入了平台相关的事件代码，同时确定事件的调用顺序。")]),s._v(" "),n("h1",{attrs:{id:"plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#plugin"}},[s._v("#")]),s._v(" plugin")]),s._v(" "),n("p",[s._v("先来看一下一个"),n("code",[s._v("plugin")]),s._v("应该长咋样：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" ChangeEventPlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  eventTypes"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    change"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      phasedRegistrationNames"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        bubbled"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'onChange'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        captured"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'onChangeCapture'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      isInteractive"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" boolean"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 标志是否高优先级反馈")]),s._v("\n      registrationName"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" string"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      dependencies"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_BLUR")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_CHANGE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_CLICK")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_FOCUS")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_INPUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_KEY_DOWN")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_KEY_UP")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TOP_SELECTION_CHANGE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  _isInputEventSupported"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" isInputEventSupported"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("extractEvents")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("topLevelType"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    targetInst"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    nativeEvent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    nativeEventTarget"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")])]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 创建event对象并return")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[n("code",[s._v("eventTypes")]),s._v("是以具体事件为"),n("code",[s._v("key")]),s._v("的 "),n("strong",[s._v("map")]),s._v(" 对象，其中每个事件的"),n("code",[s._v("phasedRegistrationNames")]),s._v("是指定"),n("code",[s._v("props")]),s._v("的名字，"),n("code",[s._v("dependencies")]),s._v("是如果需要绑定"),n("code",[s._v("change")]),s._v("事件需要同时绑定哪些事件")]),s._v(" "),n("p",[n("code",[s._v("extractEvents")]),s._v("是一个方法，用来根据具体真实触发的事件类型等参数，返回对应的事件对象，也可以返回"),n("code",[s._v("null")]),s._v("表示当前事件跟这个插件没有关系。")]),s._v(" "),n("h1",{attrs:{id:"注册插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注册插件"}},[s._v("#")]),s._v(" 注册插件")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("变量名")]),s._v(" "),n("th",[s._v("作用")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[n("code",[s._v("eventPluginOrder")])]),s._v(" "),n("td",[s._v("记录插件的调用顺序")])]),s._v(" "),n("tr",[n("td",[n("code",[s._v("namesToPlugins")])]),s._v(" "),n("td",[s._v("以插件名为key的插件 map")])]),s._v(" "),n("tr",[n("td",[n("code",[s._v("plugins")])]),s._v(" "),n("td",[s._v("按照"),n("code",[s._v("eventPluginOrder")]),s._v("顺序存储的插件模块数组")])]),s._v(" "),n("tr",[n("td",[n("code",[s._v("eventNameDispatchConfigs")])]),s._v(" "),n("td",[s._v("按照每个插件中的"),n("code",[s._v("eventTypes")]),s._v("中的每一项为"),n("code",[s._v("key")]),s._v("，其对应的对象为"),n("code",[s._v("value")]),s._v("的对象")])]),s._v(" "),n("tr",[n("td",[n("code",[s._v("registrationNameModules")])]),s._v(" "),n("td",[s._v("存储有"),n("code",[s._v("phasedRegistrationNames")]),s._v("或者"),n("code",[s._v("registrationName")]),s._v("的插件的事件对应的模块")])])])]),s._v(" "),n("ol",[n("li",[n("p",[s._v("首先调用"),n("code",[s._v("injectEventPluginOrder")]),s._v("，设置"),n("code",[s._v("eventPluginOrder")])])]),s._v(" "),n("li",[n("p",[s._v("然后调用"),n("code",[s._v("injectEventPluginsByName")]),s._v("，把所有插件加入到"),n("code",[s._v("namesToPlugins")]),s._v("对象中，并以插件名为"),n("code",[s._v("key")])])]),s._v(" "),n("li",[n("p",[s._v("然后调用"),n("code",[s._v("recomputePluginOrdering")]),s._v("把所有插件安顺序插入到"),n("code",[s._v("plugins")]),s._v("数组中，并对每个插件中的"),n("code",[s._v("eventTypes")]),s._v("中的每个事件类型调用"),n("code",[s._v("publishEventForPlugin")]),s._v("，设置"),n("code",[s._v("eventNameDispatchConfigs")]),s._v("对象，以事件名为"),n("code",[s._v("key")]),s._v("存储"),n("code",[s._v("dispatchConfig")]),s._v("，也就是上面插件中的"),n("code",[s._v("eventTypes.change")]),s._v("对应的对象")])]),s._v(" "),n("li",[n("p",[s._v("然后还需要对每一个"),n("code",[s._v("phasedRegistrationNames")]),s._v("里面的项执行"),n("code",[s._v("publishRegistrationName")]),s._v("，设置"),n("code",[s._v("registrationNameModules")]),s._v("，以事件名为"),n("code",[s._v("key")]),s._v("存储模块，同时设置"),n("code",[s._v("registrationNameDependencies")]),s._v("，以事件名为"),n("code",[s._v("key")]),s._v("存储事件的"),n("code",[s._v("dependencies")])])])]),s._v(" "),n("p",[n("code",[s._v("registrationNameModules")]),s._v("在更新 DOM 节点的时候会被用到，"),n("code",[s._v("registrationNameDependencies")]),s._v("在绑定事件的使用会被用到。")]),s._v(" "),n("p",[s._v("整个注册过程就是为了初始化设置这些变量，这些变量在后续的 DOM 操作中会扮演比较重要的角色。")]),s._v(" "),n("h1",{attrs:{id:"结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#结构"}},[s._v("#")]),s._v(" 结构")]),s._v(" "),n("p",[n("strong",[s._v("eventNameDispatchConfigs")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  change"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangePlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eventTypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("change"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...other plugins")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("strong",[s._v("registrationNameModules")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  onChange"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangePlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  onChangeCapture"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangePlugin\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("strong",[s._v("registrationNameDependencies")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  onChange"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangePlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eventTypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("change"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dependencies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  onChangeCapture"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" ChangePlugin"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("eventTypes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("change"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dependencies\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);